!function(t,e){"use strict";t.fn.popup=function(e){var i=this.selector,n=new t.Popup(e);return t(document).on("click.popup",i,function(e){e.preventDefault(),n.open(t(this).attr("href"),void 0,this)}),this.each(function(){t(this).data("popup",n)})},t.Popup=function(i){function n(e){var i;return t.each(e,function(t,e){return e?(i=e,!1):void 0}),i}function s(e){return"function"==typeof e?"function":e instanceof t?"jQuery":"#"===e.substr(0,1)||"."===e.substr(0,1)?"inline":-1!==t.inArray(e.substr(e.length-3),v)?"image":"http"===e.substr(0,4)?"external":"ajax"}function o(i){u&&u.fadeOut("fast",function(){t(this).remove()});var n=!0;void 0===c&&(n=!1,c=t('<div class="'+g.o.containerClass+'">'),p=t(g.o.markup).appendTo(c),h=t(g.o.closeContent).one("click",function(){g.close()}).appendTo(c),t(e).resize(g.center),c.appendTo(t("body")).css("opacity",0));var s=t("."+g.o.contentClass,c);g.width?s.css("width",g.width,10):s.css("width",""),g.height?s.css("height",g.height,10):s.css("height",""),p.hasClass(g.o.contentClass)?p.html(i):p.find("."+g.o.contentClass).html(i),n?g.o.replaced.call(g,c,d):g.o.show.call(g,c,d)}function r(t,e){var i=new RegExp("[?&]"+t+"=([^&]*)").exec(e);return i&&decodeURIComponent(i[1].replace(/\+/g," "))}var a,l,d,c,h,u,p,g=this,f={backClass:"popup_back",backOpacity:.7,containerClass:"popup_cont",closeContent:'<div class="popup_close">&times;</div>',markup:'<div class="popup"><div class="popup_content"/></div>',contentClass:"popup_content",preloaderContent:'<p class="preloader">Loading</p>',activeClass:"popup_active",hideFlash:!1,speed:200,popupPlaceholderClass:"popup_placeholder",keepInlineChanges:!0,modal:!1,content:null,type:"auto",width:null,height:null,typeParam:"pt",widthParam:"pw",heightParam:"ph",beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},error:function(){},show:function(t){var e=this;e.center(),t.animate({opacity:1},e.o.speed,function(){e.o.afterOpen.call(e)})},replaced:function(){this.center().o.afterOpen.call(this)},hide:function(t){void 0!==t&&t.animate({opacity:0},this.o.speed)},types:{inline:function(e,i){var n=t(e);n.addClass(g.o.popupPlaceholderClass),g.o.keepInlineChanges||(l=n.html()),i.call(this,n.children())},image:function(e,i){var n=this;t("<img />").one("load",function(){var t=this;setTimeout(function(){i.call(n,t)},0)}).one("error",function(){g.o.error.call(g,e,"image")}).attr("src",e).each(function(){this.complete&&t(this).trigger("load")})},external:function(e,i){var n=t("<iframe />").attr({src:e,frameborder:0,width:g.width,height:g.height});i.call(this,n)},html:function(t,e){e.call(this,t)},jQuery:function(t,e){e.call(this,t.html())},"function":function(t,e){e.call(this,t.call(g))},ajax:function(e,i){t.ajax({url:e,success:function(t){i.call(this,t)},error:function(){g.o.error.call(g,e,"ajax")}})}}},v=["png","jpg","gif"];g.ele=void 0,g.o=t.extend(!0,{},f,i),g.open=function(e,i,l){if(e=void 0===e||"#"===e?g.o.content:e,null===e)return g.o.error.call(g,e,a),!1;if(void 0!==l&&(g.ele&&g.o.activeClass&&t(g.ele).removeClass(g.o.activeClass),g.ele=l,g.ele&&g.o.activeClass&&t(g.ele).addClass(g.o.activeClass)),void 0===d&&(d=t('<div class="'+g.o.backClass+'"/>').appendTo(t("body")).css("opacity",0).animate({opacity:g.o.backOpacity},g.o.speed),g.o.modal||d.one("click.popup",function(){g.close()}),g.o.hideFlash&&t("object, embed").css("visibility","hidden"),g.o.preloaderContent&&(u=t(g.o.preloaderContent).appendTo(t("body")))),i=n([i,g.o.type]),i="auto"===i?s(e):i,a=i,g.width=g.o.width?g.o.width:null,g.height=g.o.height?g.o.height:null,-1===t.inArray(i,["inline","jQuery","function"])){var c=r(g.o.typeParam,e),h=r(g.o.widthParam,e),p=r(g.o.heightParam,e);i=null!==c?c:i,g.width=null!==h?h:g.width,g.height=null!==p?p:g.height}g.o.beforeOpen.call(g,i),g.o.types[i]?g.o.types[i].call(g,e,o):g.o.types.ajax.call(g,e,o)},g.close=function(){return g.o.beforeClose.call(g),"inline"===a&&g.o.keepInlineChanges&&(l=t("."+g.o.contentClass).html()),void 0!==d&&d.animate({opacity:0},g.o.speed,function(){g.cleanUp()}),g.o.hide.call(g,c,d),g},g.cleanUp=function(){d.add(c).remove(),c=d=void 0,t(e).unbind("resize",g.center),g.o.hideFlash&&t("object, embed").css("visibility","visible"),g.ele&&g.o.activeClass&&t(g.ele).removeClass(g.o.activeClass);var i=t("."+g.o.popupPlaceholderClass);return"inline"==a&&i.length&&i.html(l).removeClass(g.o.popupPlaceholderClass),a=null,g.o.afterClose.call(g),g},g.center=function(){return c.css(g.getCenter()),d.css({height:document.documentElement.clientHeight}),g},g.getCenter=function(){var t=c.children().outerWidth(!0),e=c.children().outerHeight(!0),i=document.documentElement.clientWidth,n=document.documentElement.clientHeight;return{top:.5*n-.5*e,left:.5*i-.5*t}}}}(jQuery,window);